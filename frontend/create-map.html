<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Mapa - D&D Toolkit</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="create-map.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div class="top-bar">
        <div class="user-avatar">
            <img src="assets/icons/user-avatar.svg" alt="User Avatar" class="avatar-icon">
        </div>
        <div class="player-details">
            <div class="player-info">
                <span class="player-name">DarkKnight</span>
                <span class="player-level">N√≠vel 25</span>
            </div>
            <div class="xp-bar">
                <div class="xp-progress" style="width: 65%;"></div>
                <span class="xp-text">8,750 / 10,000 XP</span>
            </div>
        </div>
        <div class="resources">
            <div class="resource-item">
                <img src="assets/icons/gold-coin.svg" alt="Ouro" class="resource-icon">
                <span class="resource-value" id="gold">1,250</span>
            </div>
            <div class="resource-item">
                <img src="assets/icons/gem.svg" alt="Gemas" class="resource-icon">
                <span class="resource-value" id="gems">12</span>
            </div>
            <div class="resource-item">
                <img src="assets/icons/diamond.svg" alt="Diamantes" class="resource-icon">
                <span class="resource-value" id="diamonds">45</span>
            </div>
        </div>
    </div>

    <!-- Conte√∫do Principal -->
    <div class="main-content">
        <div class="map-creator">
            <div class="creator-header">
                <h1>CRIAR MAPA</h1>
                <p class="subtitle">Crie mapas detalhados para suas aventuras de RPG</p>
            </div>

            <form id="mapForm" class="map-form">
                <!-- Informa√ß√µes B√°sicas -->
                <div class="form-section">
                    <h2>Informa√ß√µes B√°sicas</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mapTitle">T√≠tulo do Mapa *</label>
                            <input type="text" id="mapTitle" name="mapTitle" required placeholder="Ex: Taverna do Javali Dourado">
                        </div>
                        <div class="form-group">
                            <label for="mapType">Tipo de Mapa</label>
                            <select id="mapType" name="mapType">
                                <option value="">Selecione o tipo</option>
                                <option value="dungeon">Masmorra</option>
                                <option value="city">Cidade</option>
                                <option value="wilderness">Natureza</option>
                                <option value="building">Edif√≠cio</option>
                                <option value="ship">Navio</option>
                                <option value="plane">Plano</option>
                                <option value="battle">Campo de Batalha</option>
                                <option value="other">Outro</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="mapDescription">Descri√ß√£o</label>
                        <textarea id="mapDescription" name="mapDescription" rows="3" placeholder="Descreva o mapa, sua fun√ß√£o e caracter√≠sticas importantes..."></textarea>
                    </div>
                </div>

                <!-- Upload de Imagem do Mapa -->
                <div class="form-section">
                    <h2>Imagem do Mapa</h2>
                    <div class="map-upload-options">
                        <div class="upload-option active" data-option="upload">
                            <h3>üìÅ Upload de Arquivo</h3>
                            <p>Envie uma imagem do seu mapa</p>
                        </div>
                        <div class="upload-option" data-option="external">
                            <h3>üîó Link Externo</h3>
                            <p>Use um link de imagem externa</p>
                        </div>
                        <div class="upload-option" data-option="generator">
                            <h3><img src="/icons/Sistema de Dados.png" alt="Gerador" style="width: 20px; height: 20px; display: inline; margin-right: 8px;" />Gerador Online</h3>
                            <p>Acesse ferramentas de cria√ß√£o</p>
                        </div>
                    </div>

                    <!-- Upload de Arquivo -->
                    <div id="uploadSection" class="upload-section active">
                        <div class="image-upload-container">
                            <input type="file" id="mapImage" name="mapImage" accept="image/*" class="image-input">
                            <div id="mapImagePreview" class="image-preview">
                                <div class="upload-placeholder">
                                    <div class="upload-icon">üìÅ</div>
                                    <p>Clique para fazer upload do mapa</p>
                                    <span class="upload-hint">PNG, JPG ou GIF at√© 10MB</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Link Externo -->
                    <div id="externalSection" class="upload-section">
                        <div class="form-group">
                            <label for="mapImageUrl">URL da Imagem</label>
                            <input type="url" id="mapImageUrl" name="mapImageUrl" placeholder="https://exemplo.com/meu-mapa.jpg">
                            <button type="button" id="previewUrl" class="btn btn-secondary">Visualizar</button>
                        </div>
                        <div id="urlPreview" class="url-preview"></div>
                    </div>

                    <!-- Geradores Online -->
                    <div id="generatorSection" class="upload-section">
                        <div class="generator-links">
                            <div class="generator-card">
                                <h4>Dungeon Scrawl</h4>
                                <p>Criador de masmorras simples e eficaz</p>
                                <a href="https://dungeonscrawl.com" target="_blank" class="btn btn-primary">Acessar</a>
                            </div>
                            <div class="generator-card">
                                <h4>Inkarnate</h4>
                                <p>Mapas de mundo e regi√µes profissionais</p>
                                <a href="https://inkarnate.com" target="_blank" class="btn btn-primary">Acessar</a>
                            </div>
                            <div class="generator-card">
                                <h4>Wonderdraft</h4>
                                <p>Software para mapas de mundo detalhados</p>
                                <a href="https://www.wonderdraft.net" target="_blank" class="btn btn-primary">Acessar</a>
                            </div>
                            <div class="generator-card">
                                <h4>Dungeondraft</h4>
                                <p>Cria√ß√£o de masmorras e edif√≠cios</p>
                                <a href="https://dungeondraft.net" target="_blank" class="btn btn-primary">Acessar</a>
                            </div>
                        </div>
                        <div class="generator-tip">
                            <p><strong>üí° Dica:</strong> Ap√≥s criar seu mapa em uma dessas ferramentas, voc√™ pode fazer o download e usar a op√ß√£o "Upload de Arquivo" acima.</p>
                        </div>
                    </div>
                </div>

                <!-- Detalhes do Mapa -->
                <div class="form-section">
                    <h2>Detalhes e Configura√ß√µes</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mapScale">Escala</label>
                            <input type="text" id="mapScale" name="mapScale" placeholder="Ex: 1 quadrado = 5 p√©s">
                        </div>
                        <div class="form-group">
                            <label for="mapDimensions">Dimens√µes</label>
                            <input type="text" id="mapDimensions" name="mapDimensions" placeholder="Ex: 40x30 quadrados">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="mapNotes">Notas e Observa√ß√µes</label>
                        <textarea id="mapNotes" name="mapNotes" rows="4" placeholder="Adicione notas importantes sobre o mapa, pontos de interesse, armadilhas, etc..."></textarea>
                    </div>
                </div>

                <!-- Pontos de Interesse -->
                <div class="form-section">
                    <h2>Pontos de Interesse</h2>
                    <div class="dynamic-list">
                        <div id="poiList" class="list-container">
                            <!-- Pontos de interesse ser√£o adicionados aqui -->
                        </div>
                        <button type="button" class="btn-add" onclick="mapCreator.addPOI()">+ Adicionar Ponto de Interesse</button>
                    </div>
                </div>

                <!-- A√ß√µes do Formul√°rio -->
                <div class="form-actions">
                    <button type="button" id="previewMap" class="btn btn-secondary"><img src="/icons/Olho.png" alt="Visualizar" style="width: 16px; height: 16px; display: inline; margin-right: 6px;" />Visualizar</button>
                    <button type="button" id="saveMap" class="btn btn-primary">üíæ Salvar</button>
                    <button type="button" id="createMap" class="btn btn-success">‚ú® Criar Mapa</button>
                    <button type="button" id="cancelMap" class="btn btn-danger"><img src="/icons/Cancelar.png" alt="Cancelar" style="width: 16px; height: 16px; display: inline; margin-right: 6px;" />Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Pr√©via -->
    <div id="previewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Pr√©via do Mapa</h2>
                <span class="close" onclick="closePreviewModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="previewContent"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closePreviewModal()">Fechar</button>
                <button type="button" class="btn btn-primary" onclick="mapCreator.exportMap()">Exportar JSON</button>
            </div>
        </div>
    </div>

    <script src="create-map.js"></script>
</body>
</html>